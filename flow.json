[
    {
        "id": "dd91d5bc.c35b28",
        "type": "tab",
        "label": "Switch-bureau",
        "disabled": false,
        "info": ""
    },
    {
        "id": "42807cfd.d808a4",
        "type": "tab",
        "label": "Deconz test",
        "disabled": false,
        "info": ""
    },
    {
        "id": "7d6f2036.24d4c",
        "type": "tab",
        "label": "Washing Machine",
        "disabled": false,
        "info": ""
    },
    {
        "id": "15ebe48.940281c",
        "type": "tab",
        "label": "Espresso machine",
        "disabled": false,
        "info": ""
    },
    {
        "id": "39aec885.0430c8",
        "type": "tab",
        "label": "Zigbee2MQTT Admin Panel",
        "disabled": false,
        "info": ""
    },
    {
        "id": "98617870.5b9f78",
        "type": "tab",
        "label": "Flow 1",
        "disabled": true,
        "info": ""
    },
    {
        "id": "92419cdc.39ec9",
        "type": "tab",
        "label": "Aqara_lamp_sensor_switch",
        "disabled": false,
        "info": ""
    },
    {
        "id": "481e1d7a.648f04",
        "type": "tab",
        "label": "Flow 5",
        "disabled": false,
        "info": ""
    },
    {
        "id": "1d7f96d0.a5ef29",
        "type": "subflow",
        "name": "Network Map (4)",
        "info": "",
        "category": "Zigbee2MQTT Admin Panel",
        "in": [],
        "out": []
    },
    {
        "id": "c2287cf1.f1006",
        "type": "subflow",
        "name": "Pairing Notifications (5)",
        "info": "",
        "category": "Zigbee2MQTT Admin Panel",
        "in": [],
        "out": []
    },
    {
        "id": "ef334060.da584",
        "type": "subflow",
        "name": "Devices (5)",
        "info": "",
        "category": "Zigbee2MQTT Admin Panel",
        "in": [],
        "out": []
    },
    {
        "id": "745da55.b69b05c",
        "type": "subflow",
        "name": "Status (5)",
        "info": "",
        "category": "Zigbee2MQTT Admin Panel",
        "in": [],
        "out": []
    },
    {
        "id": "4b20a347.6179ec",
        "type": "subflow",
        "name": "Logging Level (5)",
        "info": "",
        "category": "Zigbee2MQTT Admin Panel",
        "in": [],
        "out": []
    },
    {
        "id": "321dbafd.bfadd6",
        "type": "subflow",
        "name": "Remove Device (5)",
        "info": "",
        "category": "Zigbee2MQTT Admin Panel",
        "in": [],
        "out": []
    },
    {
        "id": "8bff0e3.fceb9f",
        "type": "subflow",
        "name": "Permit Join (5)",
        "info": "",
        "category": "Zigbee2MQTT Admin Panel",
        "in": [],
        "out": []
    },
    {
        "id": "e084a6a.4631f58",
        "type": "subflow",
        "name": "Rename Device (5)",
        "info": "",
        "category": "Zigbee2MQTT Admin Panel",
        "in": [],
        "out": []
    },
    {
        "id": "2ba505e1.0398ba",
        "type": "subflow",
        "name": "zigbee2mqtt in",
        "info": "",
        "category": "",
        "in": [],
        "out": [
            {
                "x": 860,
                "y": 260,
                "wires": [
                    {
                        "id": "372778a1.179e18",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "eb4dfade.17b168",
        "type": "subflow",
        "name": "Subflow 1",
        "info": "",
        "in": [
            {
                "x": 60,
                "y": 160,
                "wires": [
                    {
                        "id": "14fb80dd.6fec7f"
                    }
                ]
            }
        ],
        "out": []
    },
    {
        "id": "20bf2b67.6ceef4",
        "type": "subflow",
        "name": "Subflow 2",
        "info": "",
        "in": [
            {
                "x": 40,
                "y": 160,
                "wires": [
                    {
                        "id": "66d40a61.2d83b4"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 580,
                "y": 180,
                "wires": [
                    {
                        "id": "1665981f.3ad7e8",
                        "port": 0
                    }
                ]
            }
        ]
    },
    {
        "id": "3bd1d239.8e8a7e",
        "type": "subflow",
        "name": "Subflow 3",
        "info": "",
        "in": [
            {
                "x": 60,
                "y": 160,
                "wires": [
                    {
                        "id": "83b549b.98556b8"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 380,
                "y": 160,
                "wires": [
                    {
                        "id": "83b549b.98556b8",
                        "port": 0
                    }
                ]
            }
        ]
    },
    {
        "id": "a0f734de.d67b08",
        "type": "subflow",
        "name": "Subflow 4",
        "info": "",
        "in": [
            {
                "x": 60,
                "y": 80,
                "wires": [
                    {
                        "id": "1b5eba9.9ce6045"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 340,
                "y": 260,
                "wires": [
                    {
                        "id": "cd6d93a5.d2353",
                        "port": 0
                    }
                ]
            }
        ]
    },
    {
        "id": "6b268e7b.d7d06",
        "type": "subflow",
        "name": "Subflow 5",
        "info": "",
        "in": [
            {
                "x": 40,
                "y": 100,
                "wires": [
                    {
                        "id": "c4b24d3c.361d2"
                    }
                ]
            }
        ],
        "out": []
    },
    {
        "id": "a4b224bf.4ceaf8",
        "type": "ui_group",
        "name": "Lights",
        "tab": "76085a4e.9eed44",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "bf0682f0.fbf51",
        "type": "deconz-server",
        "name": "deconz",
        "ip": "192.168.1.122",
        "port": "8090",
        "apikey": "097DEDA817",
        "ws_port": "8088",
        "secure": false,
        "polling": "15"
    },
    {
        "id": "92d6d012.6888",
        "type": "ui_base",
        "theme": {
            "name": "theme-light",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#0094CE",
                    "value": "#0094CE",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#0094CE",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#fafafa",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#1bbfff",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#111111",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#0094ce",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey"
            }
        },
        "site": {
            "name": "Node-RED Dashboard",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "1f075dcf.f5d7a2",
        "type": "ui_group",
        "name": "Lights",
        "tab": "",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "76085a4e.9eed44",
        "type": "ui_tab",
        "name": "Other",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "14e59bba.6cefb4",
        "type": "ui_group",
        "name": "Bedroom1",
        "tab": "53787869.05be68",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "53787869.05be68",
        "type": "ui_tab",
        "name": "Lights",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "33d93be9.43e3b4",
        "type": "ui_group",
        "name": "bathroom",
        "tab": "53787869.05be68",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "eedbfbf2.9ea398",
        "type": "ui_group",
        "name": "Default",
        "tab": "76085a4e.9eed44",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "9a0992c2.8c6b",
        "type": "ui_group",
        "name": "Bureau",
        "tab": "53787869.05be68",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "25691028.52c6a",
        "type": "ui_group",
        "z": "ef334060.da584",
        "name": "Devices",
        "tab": "8a847acd.0763c8",
        "order": 1,
        "disp": true,
        "width": "12",
        "collapse": false
    },
    {
        "id": "40573a59.6ec0c4",
        "type": "ui_group",
        "name": "Status",
        "tab": "8a847acd.0763c8",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "4cb35853.cdcde8",
        "type": "ui_group",
        "z": "4b20a347.6179ec",
        "name": "Logging Level",
        "tab": "8a847acd.0763c8",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "bbb3596e.f2c6a8",
        "type": "ui_group",
        "z": "321dbafd.bfadd6",
        "name": "Remove Device",
        "tab": "8a847acd.0763c8",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "7b37feaf.b63ae",
        "type": "ui_group",
        "name": "Permit Join",
        "tab": "8a847acd.0763c8",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "cae262ab.45512",
        "type": "mqtt-broker",
        "name": "",
        "broker": "192.168.0.5",
        "port": "8883",
        "tls": "9895f781.42a5e8",
        "clientid": "",
        "usetls": true,
        "compatmode": true,
        "keepalive": "15",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "closeTopic": "",
        "closePayload": "",
        "willTopic": "",
        "willQos": "0",
        "willPayload": ""
    },
    {
        "id": "9895f781.42a5e8",
        "type": "tls-config",
        "name": "",
        "cert": "",
        "key": "",
        "ca": "",
        "certname": "m2mqtt_srv.crt",
        "keyname": "m2mqtt_srv.key",
        "caname": "m2mqtt_ca.crt",
        "servername": "",
        "verifyservercert": false
    },
    {
        "id": "241ead91.463d32",
        "type": "ui_group",
        "name": "Rename Device",
        "tab": "8a847acd.0763c8",
        "order": 6,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "8a847acd.0763c8",
        "type": "ui_tab",
        "name": "Zigbee2MQTT Admin Panel",
        "icon": "dashboard"
    },
    {
        "id": "fc7fb74b.bfd778",
        "type": "ui_group",
        "name": "Device management",
        "tab": "483aecca.dda94c",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "aa5944c2.55c4b8",
        "type": "mqtt-broker",
        "name": "Docker home automation",
        "broker": "emqx",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "compatmode": false,
        "keepalive": "300",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "willTopic": "",
        "willQos": "0",
        "willPayload": ""
    },
    {
        "id": "85a3098.e2ae378",
        "type": "ui_group",
        "name": "Device list",
        "tab": "483aecca.dda94c",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "4be86d0a.f91dc4",
        "type": "ui_group",
        "name": "Bridge configuration",
        "tab": "483aecca.dda94c",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "708ab4d2.19470c",
        "type": "ui_group",
        "name": "Network map",
        "tab": "df698bbb.a5a5",
        "order": 1,
        "disp": false,
        "width": "27",
        "collapse": false
    },
    {
        "id": "bb293343.5597b8",
        "type": "ui_group",
        "name": "Device details",
        "tab": "483aecca.dda94c",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "63f0b808.3f7a8",
        "type": "ui_group",
        "name": "Group configuration",
        "tab": "483aecca.dda94c",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": true
    },
    {
        "id": "b1982a6e.d25db",
        "type": "ui_group",
        "name": "Dashboard Controls",
        "tab": "483aecca.dda94c",
        "order": 6,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "483aecca.dda94c",
        "type": "ui_tab",
        "name": "Z2M Admin",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "df698bbb.a5a5",
        "type": "ui_tab",
        "name": "Z2M Network map",
        "icon": "dashboard",
        "disabled": false,
        "hidden": true
    },
    {
        "id": "39f079e8.8d0cd6",
        "type": "mqtt-broker",
        "name": "domotica",
        "broker": "192.168.1.122",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "compatmode": false,
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "willTopic": "",
        "willQos": "0",
        "willPayload": ""
    },
    {
        "id": "130c9464.7d0abc",
        "type": "ui_group",
        "name": "Kitchen",
        "tab": "",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "54f2aeda.6aabf",
        "type": "ui_group",
        "name": "Kitchen",
        "tab": "",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "9f5d2c7e.15a7f",
        "type": "ui_group",
        "name": "Kitchen",
        "tab": "53787869.05be68",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "fa873071.68d96",
        "type": "zigbee2mqtt-server",
        "z": "e084a6a.4631f58",
        "name": "",
        "host": "domotica",
        "mqtt_port": "1883",
        "mqtt_username": "mqtt",
        "mqtt_password": "Kur11!kumA",
        "tls": "9895f781.42a5e8",
        "usetls": false,
        "base_topic": "zigbee2mqtt"
    },
    {
        "id": "67c87fc0.150f8",
        "type": "zigbee2mqtt-server",
        "name": "",
        "host": "192.168.1.122",
        "mqtt_port": "1883",
        "mqtt_username": "mqtt",
        "mqtt_password": "Kur11!kumA",
        "tls": "9895f781.42a5e8",
        "usetls": false,
        "base_topic": "zigbee2mqtt"
    },
    {
        "id": "7db40803.091658",
        "type": "vsh-connection",
        "name": "echo",
        "port": "8883",
        "accessTokenExpiry": "1606582378878"
    },
    {
        "id": "cda469d1.0f29c8",
        "type": "nora-config",
        "name": "nora config",
        "group": "Bureau",
        "notify": false
    },
    {
        "id": "d2f59c3a.a44e",
        "type": "mqtt in",
        "z": "dd91d5bc.c35b28",
        "name": "",
        "topic": "domoticz/out",
        "qos": "2",
        "datatype": "auto",
        "broker": "39f079e8.8d0cd6",
        "x": 390,
        "y": 760,
        "wires": [
            [
                "df0b0b20.67b218"
            ]
        ]
    },
    {
        "id": "59209739.8dab68",
        "type": "mqtt out",
        "z": "dd91d5bc.c35b28",
        "name": "",
        "topic": "domoticz/in",
        "qos": "2",
        "retain": "",
        "broker": "39f079e8.8d0cd6",
        "x": 1010,
        "y": 640,
        "wires": []
    },
    {
        "id": "907aad5c.372c2",
        "type": "inject",
        "z": "dd91d5bc.c35b28",
        "name": "Turn on 376",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"command\": \"getdeviceinfo\", \"idx\": 376 }",
        "payloadType": "json",
        "x": 470,
        "y": 420,
        "wires": [
            [
                "f167b09f.8d036"
            ]
        ]
    },
    {
        "id": "df0b0b20.67b218",
        "type": "json",
        "z": "dd91d5bc.c35b28",
        "name": "obj2JSON",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 590,
        "y": 780,
        "wires": [
            [
                "b244935d.c22bd",
                "3dffec1e.66e084"
            ]
        ]
    },
    {
        "id": "f167b09f.8d036",
        "type": "change",
        "z": "dd91d5bc.c35b28",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "idx",
                "pt": "flow",
                "to": "payload.idx",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "nodered",
                "pt": "flow",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 740,
        "y": 500,
        "wires": [
            [
                "59209739.8dab68"
            ]
        ]
    },
    {
        "id": "9d9265bb.5dfe38",
        "type": "inject",
        "z": "dd91d5bc.c35b28",
        "name": "Turn on 178",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"command\": \"getdeviceinfo\", \"idx\": 178 }",
        "payloadType": "json",
        "x": 470,
        "y": 520,
        "wires": [
            [
                "f167b09f.8d036"
            ]
        ]
    },
    {
        "id": "b244935d.c22bd",
        "type": "function",
        "z": "dd91d5bc.c35b28",
        "name": "",
        "func": "var nred=flow.get(\"nodered\") || false;\nmsg.nodered=nred;\nif(nred == true){\n    flow.set(\"nodered\",false);\n    msg.nodered=false;\n\n    var idx=flow.get(\"idx\");\n    if(msg.payload.idx == idx){\n        var myswitch=msg.payload.nvalue;\n        if(myswitch == 0) {\n            msg.payload={\"command\":\"switchlight\", \"idx\": idx, \"switchcmd\": \"On\"};\n        } else{\n            msg.payload={\"command\":\"switchlight\", \"idx\": idx, \"switchcmd\": \"Off\"};\n        }\n    }\n    return [msg,null];\n} else{\n    return [null,msg];\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 780,
        "y": 800,
        "wires": [
            [
                "59209739.8dab68",
                "f9784f6d.1e0fa",
                "cafd6274.bb1a9"
            ],
            []
        ]
    },
    {
        "id": "ab03ac26.89c9f",
        "type": "inject",
        "z": "dd91d5bc.c35b28",
        "name": "Turn on 221",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"command\": \"getdeviceinfo\", \"idx\": 221 }",
        "payloadType": "json",
        "x": 310,
        "y": 620,
        "wires": [
            [
                "f167b09f.8d036"
            ]
        ]
    },
    {
        "id": "cafd6274.bb1a9",
        "type": "debug",
        "z": "dd91d5bc.c35b28",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1510,
        "y": 640,
        "wires": []
    },
    {
        "id": "f9784f6d.1e0fa",
        "type": "function",
        "z": "dd91d5bc.c35b28",
        "name": "",
        "func": "var myswitch=msg.payload.switchcmd;\nif(myswitch == \"Off\"){\n    msg.payload=false;\n} else{\n    msg.payload=true;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1100,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "882e60db.cdb17",
        "type": "debug",
        "z": "dd91d5bc.c35b28",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 990,
        "y": 1040,
        "wires": []
    },
    {
        "id": "da816e61.02954",
        "type": "function",
        "z": "dd91d5bc.c35b28",
        "name": "",
        "func": "var myswitch=msg.payload.switchcmd;\nif(myswitch == \"Off\"){\n    msg.payload=false;\n} else{\n    msg.payload=true;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 720,
        "y": 1040,
        "wires": [
            [
                "882e60db.cdb17"
            ]
        ]
    },
    {
        "id": "6899461b.b82df8",
        "type": "deconz-input",
        "z": "42807cfd.d808a4",
        "name": "",
        "server": "bf0682f0.fbf51",
        "device": "group_7",
        "device_name": "○ Bureau0",
        "topic": "",
        "state": "0",
        "output": "always",
        "outputAtStartup": true,
        "x": 240,
        "y": 640,
        "wires": [
            [
                "2052571c.29d348"
            ],
            []
        ]
    },
    {
        "id": "a14495e.6bc8d68",
        "type": "deconz-output",
        "z": "42807cfd.d808a4",
        "name": "",
        "server": "bf0682f0.fbf51",
        "device": "group_7",
        "device_name": "○ Bureau0",
        "command": "on",
        "commandType": "deconz_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transitionTime": "",
        "x": 800,
        "y": 700,
        "wires": []
    },
    {
        "id": "e4b57a1a.a72bc8",
        "type": "kasa",
        "z": "7d6f2036.24d4c",
        "name": "Lavelinge - HS110(FR)",
        "device": "192.168.1.234",
        "interval": "5000",
        "eventInterval": "5000",
        "payload": "getInfo",
        "payloadType": "info",
        "debug": false,
        "x": 520,
        "y": 380,
        "wires": [
            [
                "5412d958.c30b08"
            ]
        ]
    },
    {
        "id": "5bd3852b.52699c",
        "type": "inject",
        "z": "7d6f2036.24d4c",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "30",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "getMeterInfo",
        "payloadType": "str",
        "x": 200,
        "y": 340,
        "wires": [
            [
                "e4b57a1a.a72bc8"
            ]
        ]
    },
    {
        "id": "5412d958.c30b08",
        "type": "switch",
        "z": "7d6f2036.24d4c",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "hask",
                "v": "power",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 770,
        "y": 460,
        "wires": [
            [
                "872f1b46.3b5708"
            ]
        ]
    },
    {
        "id": "872f1b46.3b5708",
        "type": "function",
        "z": "7d6f2036.24d4c",
        "name": "Average and out",
        "func": "var data=context.get(\"data\");\nvar power=msg.payload.power;\nvar maxLength=10;\ndata.push(power);\nvar count=data.length;\nif(count > maxLength){\n    data.shift();\n    count=data.length;\n}\ncontext.set(\"data\",data);\n\nvar avg=0.0;\nfor(var i=0;i<count;i++){\n    avg+=data[i];\n}\navg/=count;\nmsg.payload=avg;\nvar New=-1;\nif(avg <2.0){\n    New=0;\n} else if (avg >= 2){\n    New=1;\n}\nvar Old=flow.get(\"Old\");\nmsg.payload=\"\";\nmsg.new=New;\nmsg.old=Old;\nmsg.avg=avg;\nmsg.topic=\"Washing Machine\"\nif(Old < 0) {\n    flow.set(\"Old\",New);\n    return [null,null,msg];\n} \nif(Old == 0 && New == 1){\n    msg.payload=\"Sir, The washing machine started its cycle.\";\n    flow.set(\"Old\",New);\n    return [msg,null,null];\n}\nif(Old == 1 && New == 0){\n    msg.payload=\"Sir, The washing machine finished its cycle.\";\n    flow.set(\"Old\",New);\n    return [null,msg,null];\n}\nreturn [null,null,msg];\n",
        "outputs": 3,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is deployed.\ncontext.set(\"count\",0);\ncontext.set(\"data\",[]);\ncontext.set(\"Stop\",false);\n",
        "finalize": "",
        "x": 1080,
        "y": 440,
        "wires": [
            [
                "b46a1fd6.f7667"
            ],
            [
                "b46a1fd6.f7667"
            ],
            []
        ]
    },
    {
        "id": "21887380.6b790c",
        "type": "inject",
        "z": "7d6f2036.24d4c",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 110,
        "y": 160,
        "wires": [
            [
                "b658b049.ebed9"
            ]
        ]
    },
    {
        "id": "b658b049.ebed9",
        "type": "change",
        "z": "7d6f2036.24d4c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "On",
                "pt": "flow",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "Old",
                "pt": "flow",
                "to": "-1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "b46a1fd6.f7667",
        "type": "e-mail",
        "z": "7d6f2036.24d4c",
        "server": "smtp.gmail.com",
        "port": "465",
        "secure": true,
        "tls": true,
        "name": "mm148881@gmail.com",
        "dname": "",
        "x": 1430,
        "y": 680,
        "wires": []
    },
    {
        "id": "93e2eeaa.6566c",
        "type": "ui_switch",
        "z": "42807cfd.d808a4",
        "name": "",
        "label": "Bureau ",
        "tooltip": "",
        "group": "9a0992c2.8c6b",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 660,
        "y": 740,
        "wires": [
            [
                "a14495e.6bc8d68"
            ]
        ]
    },
    {
        "id": "2052571c.29d348",
        "type": "change",
        "z": "42807cfd.d808a4",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.all_on",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 640,
        "wires": [
            [
                "93e2eeaa.6566c"
            ]
        ]
    },
    {
        "id": "ff0ce30f.0785c",
        "type": "deconz-input",
        "z": "42807cfd.d808a4",
        "name": "",
        "server": "bf0682f0.fbf51",
        "device": "group_23",
        "device_name": "○ Bedroom1",
        "topic": "",
        "state": "0",
        "output": "always",
        "outputAtStartup": true,
        "x": 270,
        "y": 840,
        "wires": [
            [
                "3e675cfa.7e17d4"
            ],
            []
        ]
    },
    {
        "id": "91885976.2e9de8",
        "type": "deconz-output",
        "z": "42807cfd.d808a4",
        "name": "",
        "server": "bf0682f0.fbf51",
        "device": "group_23",
        "device_name": "○ Bedroom1",
        "command": "on",
        "commandType": "deconz_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transitionTime": "",
        "x": 820,
        "y": 900,
        "wires": []
    },
    {
        "id": "d3311b7b.97fba8",
        "type": "ui_switch",
        "z": "42807cfd.d808a4",
        "name": "",
        "label": "Bedroom lamp",
        "tooltip": "",
        "group": "14e59bba.6cefb4",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 700,
        "y": 940,
        "wires": [
            [
                "91885976.2e9de8"
            ]
        ]
    },
    {
        "id": "3e675cfa.7e17d4",
        "type": "change",
        "z": "42807cfd.d808a4",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.all_on",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 840,
        "wires": [
            [
                "d3311b7b.97fba8"
            ]
        ]
    },
    {
        "id": "9275e300.be18c",
        "type": "deconz-input",
        "z": "42807cfd.d808a4",
        "name": "",
        "server": "bf0682f0.fbf51",
        "device": "ec:1b:bd:ff:fe:68:6d:8f-01",
        "device_name": "On/Off Ceiling bedroom1 : On/Off light",
        "topic": "",
        "state": "0",
        "output": "always",
        "outputAtStartup": true,
        "x": 350,
        "y": 980,
        "wires": [
            [],
            [
                "e92a46d1.240ce8"
            ]
        ]
    },
    {
        "id": "57ad918a.56bcd",
        "type": "deconz-output",
        "z": "42807cfd.d808a4",
        "name": "",
        "server": "bf0682f0.fbf51",
        "device": "ec:1b:bd:ff:fe:68:6d:8f-01",
        "device_name": "On/Off Ceiling bedroom1 : On/Off light",
        "command": "on",
        "commandType": "deconz_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transitionTime": "",
        "x": 1030,
        "y": 1080,
        "wires": []
    },
    {
        "id": "d6010c27.dc379",
        "type": "ui_switch",
        "z": "42807cfd.d808a4",
        "name": "",
        "label": "Bedroom plafonnier",
        "tooltip": "",
        "group": "14e59bba.6cefb4",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 750,
        "y": 1040,
        "wires": [
            [
                "57ad918a.56bcd"
            ]
        ]
    },
    {
        "id": "e92a46d1.240ce8",
        "type": "change",
        "z": "42807cfd.d808a4",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.On",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 1160,
        "wires": [
            [
                "d6010c27.dc379"
            ]
        ]
    },
    {
        "id": "f2e44244.6c561",
        "type": "debug",
        "z": "42807cfd.d808a4",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 850,
        "y": 780,
        "wires": []
    },
    {
        "id": "6fa595df.93901c",
        "type": "deconz-get",
        "z": "42807cfd.d808a4",
        "name": "",
        "server": "bf0682f0.fbf51",
        "device": "00:15:8d:00:04:20:25:78-01-0406",
        "device_name": "Motion Sensor : ZHAPresence",
        "state": "0",
        "x": 520,
        "y": 1340,
        "wires": [
            [
                "a9f318cf.f0dd08"
            ]
        ]
    },
    {
        "id": "a9f318cf.f0dd08",
        "type": "debug",
        "z": "42807cfd.d808a4",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 800,
        "y": 1280,
        "wires": []
    },
    {
        "id": "d69cdc90.8973b",
        "type": "inject",
        "z": "42807cfd.d808a4",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 280,
        "y": 1280,
        "wires": [
            [
                "6fa595df.93901c"
            ]
        ]
    },
    {
        "id": "19c8c4cc.c0e23b",
        "type": "deconz-get",
        "z": "42807cfd.d808a4",
        "name": "",
        "server": "bf0682f0.fbf51",
        "device": "00:17:88:01:08:63:11:7f-02-0406",
        "device_name": "Motion Sensor: ZHAPresence",
        "state": "0",
        "x": 450,
        "y": 1480,
        "wires": [
            [
                "50a810e3.9e5fc"
            ]
        ]
    },
    {
        "id": "50a810e3.9e5fc",
        "type": "debug",
        "z": "42807cfd.d808a4",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 730,
        "y": 1420,
        "wires": []
    },
    {
        "id": "9bfa47a5.997408",
        "type": "inject",
        "z": "42807cfd.d808a4",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 210,
        "y": 1420,
        "wires": [
            [
                "19c8c4cc.c0e23b"
            ]
        ]
    },
    {
        "id": "be83b241.c92f4",
        "type": "ui_switch",
        "z": "7d6f2036.24d4c",
        "name": "",
        "label": "Washing Machine",
        "tooltip": "",
        "group": "33d93be9.43e3b4",
        "order": 0,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 210,
        "y": 680,
        "wires": [
            [
                "84eb26f1.9a2cf8"
            ]
        ]
    },
    {
        "id": "84eb26f1.9a2cf8",
        "type": "kasa",
        "z": "7d6f2036.24d4c",
        "name": "Lavelinge - HS110(FR)",
        "device": "192.168.1.234",
        "interval": "15000",
        "eventInterval": "15000",
        "payload": "getInfo",
        "payloadType": "info",
        "debug": false,
        "x": 580,
        "y": 860,
        "wires": [
            []
        ]
    },
    {
        "id": "f32990b3.bdfb2",
        "type": "ui_switch",
        "z": "15ebe48.940281c",
        "name": "",
        "label": "Espresso",
        "tooltip": "",
        "group": "9f5d2c7e.15a7f",
        "order": 0,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 320,
        "y": 380,
        "wires": [
            [
                "1d127f77.a4c1c1"
            ]
        ]
    },
    {
        "id": "ffc0c834.10a548",
        "type": "inject",
        "z": "15ebe48.940281c",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 250,
        "y": 880,
        "wires": [
            [
                "1807f247.7d2d3e"
            ]
        ]
    },
    {
        "id": "7df806a2.8e4d88",
        "type": "thingzi-timer",
        "z": "15ebe48.940281c",
        "name": "Morning Weekdays",
        "lat": "48.7144",
        "lon": "2.2463",
        "timerType": "onoff",
        "startupMessage": false,
        "ontype": "tod",
        "ontimesun": "dusk",
        "ontimetod": "7:30",
        "onpropertytype": "msg",
        "onproperty": "payload",
        "onvaluetype": "str",
        "onvalue": "true",
        "onoffset": "-60",
        "onrandomoffset": false,
        "offtype": "tod",
        "offtimesun": "dawn",
        "offtimetod": "9:30",
        "offpropertytype": "msg",
        "offproperty": "payload",
        "offvaluetype": "str",
        "offvalue": "false",
        "offoffset": "-60",
        "offrandomoffset": false,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": false,
        "sun": false,
        "x": 150,
        "y": 640,
        "wires": [
            [
                "1d127f77.a4c1c1"
            ]
        ]
    },
    {
        "id": "fd7dff19.ad685",
        "type": "thingzi-timer",
        "z": "15ebe48.940281c",
        "name": "Morning Weekends",
        "lat": "48.7144",
        "lon": "2.2463",
        "timerType": "onoff",
        "startupMessage": false,
        "ontype": "tod",
        "ontimesun": "dusk",
        "ontimetod": "8:00",
        "onpropertytype": "msg",
        "onproperty": "payload",
        "onvaluetype": "str",
        "onvalue": "true",
        "onoffset": "-60",
        "onrandomoffset": false,
        "offtype": "tod",
        "offtimesun": "dawn",
        "offtimetod": "10:00",
        "offpropertytype": "msg",
        "offproperty": "payload",
        "offvaluetype": "str",
        "offvalue": "false",
        "offoffset": "-60",
        "offrandomoffset": false,
        "mon": false,
        "tue": false,
        "wed": false,
        "thu": false,
        "fri": false,
        "sat": true,
        "sun": true,
        "x": 150,
        "y": 560,
        "wires": [
            [
                "1d127f77.a4c1c1"
            ]
        ]
    },
    {
        "id": "aea8fc16.6c1f",
        "type": "thingzi-timer",
        "z": "15ebe48.940281c",
        "name": "Lunch Weekdays",
        "lat": "48.7144",
        "lon": "2.2463",
        "timerType": "onoff",
        "startupMessage": false,
        "ontype": "tod",
        "ontimesun": "dusk",
        "ontimetod": "12:00",
        "onpropertytype": "msg",
        "onproperty": "payload",
        "onvaluetype": "str",
        "onvalue": "true",
        "onoffset": "-60",
        "onrandomoffset": false,
        "offtype": "tod",
        "offtimesun": "dawn",
        "offtimetod": "13:40",
        "offpropertytype": "msg",
        "offproperty": "payload",
        "offvaluetype": "str",
        "offvalue": "false",
        "offoffset": "-60",
        "offrandomoffset": false,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": false,
        "sun": false,
        "x": 140,
        "y": 480,
        "wires": [
            [
                "1d127f77.a4c1c1"
            ]
        ]
    },
    {
        "id": "6a0d6ac1.9471a4",
        "type": "thingzi-timer",
        "z": "15ebe48.940281c",
        "name": "Lunch Weekends",
        "lat": "48.7144",
        "lon": "2.2463",
        "timerType": "onoff",
        "startupMessage": false,
        "ontype": "tod",
        "ontimesun": "dusk",
        "ontimetod": "12:00",
        "onpropertytype": "msg",
        "onproperty": "payload",
        "onvaluetype": "str",
        "onvalue": "true",
        "onoffset": "-60",
        "onrandomoffset": false,
        "offtype": "tod",
        "offtimesun": "dawn",
        "offtimetod": "14:00",
        "offpropertytype": "msg",
        "offproperty": "payload",
        "offvaluetype": "str",
        "offvalue": "false",
        "offoffset": "-60",
        "offrandomoffset": false,
        "mon": false,
        "tue": false,
        "wed": false,
        "thu": false,
        "fri": false,
        "sat": true,
        "sun": true,
        "x": 140,
        "y": 420,
        "wires": [
            [
                "1d127f77.a4c1c1"
            ]
        ]
    },
    {
        "id": "1807f247.7d2d3e",
        "type": "function",
        "z": "15ebe48.940281c",
        "name": "",
        "func": "var old=context.get(\"old\");\nvar old0=old;\nif(old < 0){\n    msg.payload=true;\n    old0=1;\n}\nif(old == 0) {\n    msg.payload=true;\n    old0=1;\n}\nif(old == 1){\n    msg.payload=false;\n    old0=0\n}\ncontext.set(\"old\",old0);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is deployed.\ncontext.set(\"old\",-1);\n",
        "finalize": "",
        "x": 480,
        "y": 800,
        "wires": [
            [
                "1d127f77.a4c1c1"
            ]
        ]
    },
    {
        "id": "247e5d9d.746692",
        "type": "mqtt in",
        "z": "15ebe48.940281c",
        "name": "",
        "topic": "domoticz/out",
        "qos": "2",
        "datatype": "auto",
        "broker": "39f079e8.8d0cd6",
        "x": 110,
        "y": 280,
        "wires": [
            [
                "f1fa073d.2c7538"
            ]
        ]
    },
    {
        "id": "f1fa073d.2c7538",
        "type": "json",
        "z": "15ebe48.940281c",
        "name": "obj2JSON",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 310,
        "y": 300,
        "wires": [
            [
                "4a095818.eb21b8"
            ]
        ]
    },
    {
        "id": "4a095818.eb21b8",
        "type": "function",
        "z": "15ebe48.940281c",
        "name": "get switch",
        "func": "if(msg.payload.idx == 457){\n    var myswitch=msg.payload.nvalue;\n    msg.topic=\"\";\n    if(myswitch == 0) {\n        msg.payload=false;\n    } else{\n        msg.payload=true;\n    }\n    return [msg,null];\n} else{\n    return [null,msg];\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 480,
        "y": 280,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "16f0a6aa.365fd9",
        "type": "mqtt in",
        "z": "1d7f96d0.a5ef29",
        "name": "zigbee2mqtt/out",
        "topic": "zigbee2mqtt/bridge/networkmap/graphviz",
        "qos": "2",
        "broker": "cae262ab.45512",
        "x": 120,
        "y": 140,
        "wires": [
            [
                "fe591242.503dd"
            ]
        ]
    },
    {
        "id": "acba4c61.f1022",
        "type": "http in",
        "z": "1d7f96d0.a5ef29",
        "name": "",
        "url": "/adminpanelapi/networkmap/graphviz",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 200,
        "y": 200,
        "wires": [
            [
                "f57c1c5c.db0c4"
            ]
        ]
    },
    {
        "id": "77ae799c.51ee38",
        "type": "http response",
        "z": "1d7f96d0.a5ef29",
        "name": "",
        "x": 610,
        "y": 200,
        "wires": []
    },
    {
        "id": "f57c1c5c.db0c4",
        "type": "function",
        "z": "1d7f96d0.a5ef29",
        "name": "get from flow",
        "func": "var networkmap = flow.get('networkmap');\n\nmsg.payload = networkmap;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 470,
        "y": 200,
        "wires": [
            [
                "77ae799c.51ee38"
            ]
        ]
    },
    {
        "id": "7e78e0f8.3ee19",
        "type": "inject",
        "z": "1d7f96d0.a5ef29",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "300",
        "topic": "",
        "payload": "graphviz",
        "payloadType": "str",
        "x": 120,
        "y": 80,
        "wires": [
            [
                "9a6b1034.fada4"
            ]
        ]
    },
    {
        "id": "fe591242.503dd",
        "type": "function",
        "z": "1d7f96d0.a5ef29",
        "name": "store in flow",
        "func": "flow.set('networkmap',msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 290,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "9a6b1034.fada4",
        "type": "mqtt out",
        "z": "1d7f96d0.a5ef29",
        "name": "zigbee2mqtt/in",
        "topic": "zigbee2mqtt/bridge/networkmap",
        "qos": "",
        "retain": "",
        "broker": "cae262ab.45512",
        "x": 280,
        "y": 80,
        "wires": []
    },
    {
        "id": "85c669c4.62eca8",
        "type": "http in",
        "z": "1d7f96d0.a5ef29",
        "name": "",
        "url": "/adminpanelapi/networkmap/viz/:engine",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 210,
        "y": 260,
        "wires": [
            [
                "ca7e5a95.b39b78"
            ]
        ]
    },
    {
        "id": "769c032.82029fc",
        "type": "http response",
        "z": "1d7f96d0.a5ef29",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 810,
        "y": 260,
        "wires": []
    },
    {
        "id": "87a8d60a.86d478",
        "type": "function",
        "z": "1d7f96d0.a5ef29",
        "name": "generate viz html",
        "func": "var html = `<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>NetworkMap</title>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/viz.js/2.1.2/viz.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/viz.js/2.1.2/full.render.js\"></script>\n    <script src='https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.5.0/dist/svg-pan-zoom.min.js'></script>\n    <style>\n    svg {\n      width: 100% !important;\n      height: 100% !important;\n      min-width: 100% !important;\n      min-height: 80% !important;\n    }\n    </style>\n  </head>\n  <body>\n    <div id=\"output\"></div>\n    \n    <script>\n        var graphData = '${(flow.get('networkmap')).replace(/(\\r\\n|\\n|\\r)/gm,\"\")}';\n        var vizOptions = { format: 'svg', engine: '${msg.engine}'}\n        var graph = document.querySelector(\"#output\");\n        var svg = graph.querySelector(\"svg\");\n        if (svg) {\n          graph.removeChild(svg);\n        }        \n\n        var viz = new Viz();\n\n        viz.renderSVGElement(graphData, vizOptions)\n          .then(function(svg) {\n            svg.id = \"svg_output\";\n            graph.appendChild(svg);              \n            \n            panZoom = svgPanZoom(svg, {\n              zoomEnabled: true,\n              controlIconsEnabled: true,\n              contain: true,\n              center: true,\n              minZoom: 0.1\n            });\n\n            svg.addEventListener('paneresize', function(e) {\n              panZoom.resize();\n            }, false);\n            window.addEventListener('resize', function(e) {\n              panZoom.resize();\n            });\n          })\n          .catch(error => {\n            // Create a new Viz instance (@see Caveats page for more info)\n            viz = new Viz();\n  \n            // Possibly display the error\n            console.error(error);\n          });\n    </script>\n  </body>\n</html>\n`\n\nmsg.payload = html;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 650,
        "y": 260,
        "wires": [
            [
                "769c032.82029fc"
            ]
        ]
    },
    {
        "id": "ca7e5a95.b39b78",
        "type": "function",
        "z": "1d7f96d0.a5ef29",
        "name": "set engine",
        "func": "var availableEngines = ['circo', 'dot', 'fdp', 'neato', 'osage', 'twopi']\nif(availableEngines.includes(msg.req.params.engine)) { msg.engine = msg.req.params.engine }\nelse { msg.engine = 'dot' }\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 470,
        "y": 260,
        "wires": [
            [
                "87a8d60a.86d478"
            ]
        ]
    },
    {
        "id": "307ac2fc.2856ae",
        "type": "mqtt in",
        "z": "c2287cf1.f1006",
        "name": "zigbee2mqtt/logging",
        "topic": "zigbee2mqtt/bridge/log",
        "qos": "2",
        "datatype": "auto",
        "broker": "39f079e8.8d0cd6",
        "x": 290,
        "y": 140,
        "wires": [
            [
                "45e00180.83e83"
            ]
        ]
    },
    {
        "id": "45e00180.83e83",
        "type": "json",
        "z": "c2287cf1.f1006",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 450,
        "y": 140,
        "wires": [
            [
                "dc358e29.225bb",
                "764d802.91a968",
                "b08008c5.204708"
            ]
        ]
    },
    {
        "id": "8daaa3f0.d30ab",
        "type": "ui_toast",
        "z": "c2287cf1.f1006",
        "position": "top right",
        "displayTime": "30",
        "highlight": "",
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "topic": "System Notification",
        "name": "",
        "x": 950,
        "y": 80,
        "wires": []
    },
    {
        "id": "dc358e29.225bb",
        "type": "function",
        "z": "c2287cf1.f1006",
        "name": "Notification",
        "func": "if(msg.payload.type == \"pairing\" && msg.payload.message == \"connecting with device\") {\n\nmsg.payload = (\"A device is attempting to pair...\");\n\nreturn msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 750,
        "y": 80,
        "wires": [
            [
                "8daaa3f0.d30ab"
            ]
        ]
    },
    {
        "id": "25f76ee9.aae022",
        "type": "comment",
        "z": "c2287cf1.f1006",
        "name": "Notification",
        "info": "",
        "x": 110,
        "y": 140,
        "wires": []
    },
    {
        "id": "b43fd89c.464988",
        "type": "comment",
        "z": "c2287cf1.f1006",
        "name": "Pairing",
        "info": "",
        "x": 590,
        "y": 80,
        "wires": []
    },
    {
        "id": "b3978445.0b5e68",
        "type": "ui_toast",
        "z": "c2287cf1.f1006",
        "position": "top right",
        "displayTime": "10",
        "highlight": "",
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "topic": "System Notification",
        "name": "",
        "x": 950,
        "y": 200,
        "wires": []
    },
    {
        "id": "764d802.91a968",
        "type": "function",
        "z": "c2287cf1.f1006",
        "name": "Notification",
        "func": "if(msg.payload.type == \"device_connected\") {\n\nmsg.payload = (\"Device paired successfully: \" + msg.payload.message);\n\nreturn msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 750,
        "y": 200,
        "wires": [
            [
                "b3978445.0b5e68"
            ]
        ]
    },
    {
        "id": "6997afbb.5fbb5",
        "type": "comment",
        "z": "c2287cf1.f1006",
        "name": "Paired",
        "info": "",
        "x": 590,
        "y": 200,
        "wires": []
    },
    {
        "id": "bb7fadab.5e5b3",
        "type": "ui_toast",
        "z": "c2287cf1.f1006",
        "position": "top right",
        "displayTime": "30",
        "highlight": "",
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "topic": "System Notification",
        "name": "",
        "x": 1030,
        "y": 140,
        "wires": []
    },
    {
        "id": "b08008c5.204708",
        "type": "function",
        "z": "c2287cf1.f1006",
        "name": "Notification",
        "func": "if(msg.payload.type == \"pairing\" && msg.payload.message == \"device incoming\") {\n\nmsg.payload = (\"A device is incoming or repairing...\");\n\nreturn msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 830,
        "y": 140,
        "wires": [
            [
                "bb7fadab.5e5b3"
            ]
        ]
    },
    {
        "id": "20b50057.748cd",
        "type": "comment",
        "z": "c2287cf1.f1006",
        "name": "Incoming or Repairing",
        "info": "",
        "x": 640,
        "y": 140,
        "wires": []
    },
    {
        "id": "7e8b83dd.fefb2c",
        "type": "mqtt in",
        "z": "ef334060.da584",
        "name": "zigbee2mqtt/out devices",
        "topic": "zigbee2mqtt/bridge/log",
        "qos": "2",
        "datatype": "auto",
        "broker": "39f079e8.8d0cd6",
        "x": 350,
        "y": 140,
        "wires": [
            [
                "493b6023.cb968"
            ]
        ]
    },
    {
        "id": "9e679d81.13fa7",
        "type": "ui_template",
        "z": "ef334060.da584",
        "group": "25691028.52c6a",
        "name": "",
        "order": 0,
        "width": "12",
        "height": "12",
        "format": "<table>\n<tr>\n    <td><B><U>Name:</U></B></td>\n    <td><B><U>ieeeAddr:</U></B></td>\n    <td><B><U>Model:</U></B></td>\n    <td><B><U>Type:</U></B></td>\n</tr>\n  <tr ng-repeat=\"obj in msg.payload.message\">\n    <td>{{ obj.friendly_name }}</td>\n    <td>{{ obj.ieeeAddr }}</td>\n    <td>{{ obj.model }}</td>\n    <td>{{ obj.type }}</td>\n  </tr>\n\n</table>\n\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 660,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "99faecf2.930b",
        "type": "mqtt out",
        "z": "ef334060.da584",
        "name": "zigbee2mqtt/in devices",
        "topic": "zigbee2mqtt/bridge/config/devices",
        "qos": "",
        "retain": "",
        "broker": "39f079e8.8d0cd6",
        "x": 580,
        "y": 60,
        "wires": []
    },
    {
        "id": "3470fa68.a6a0f6",
        "type": "inject",
        "z": "ef334060.da584",
        "name": "Request Device List",
        "repeat": "4",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 360,
        "y": 60,
        "wires": [
            [
                "99faecf2.930b"
            ]
        ]
    },
    {
        "id": "9db58260.e1cef",
        "type": "comment",
        "z": "ef334060.da584",
        "name": "Request Device List",
        "info": "",
        "x": 130,
        "y": 60,
        "wires": []
    },
    {
        "id": "c504a6d9.be0f88",
        "type": "comment",
        "z": "ef334060.da584",
        "name": "Receive Device List",
        "info": "",
        "x": 130,
        "y": 140,
        "wires": []
    },
    {
        "id": "493b6023.cb968",
        "type": "json",
        "z": "ef334060.da584",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 530,
        "y": 140,
        "wires": [
            [
                "9e679d81.13fa7",
                "ec8f578e.d813d8",
                "5fc28354.efa61c"
            ]
        ]
    },
    {
        "id": "62d673de.710fdc",
        "type": "http in",
        "z": "ef334060.da584",
        "name": "",
        "url": "/adminpanelapi/devicelist",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 530,
        "y": 220,
        "wires": [
            [
                "e07b6d25.d3f88"
            ]
        ]
    },
    {
        "id": "ec8f578e.d813d8",
        "type": "function",
        "z": "ef334060.da584",
        "name": "Store Data",
        "func": "flow.set('devicelist',msg.payload);",
        "outputs": 1,
        "noerr": 0,
        "x": 310,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "9e2e3a21.508488",
        "type": "http response",
        "z": "ef334060.da584",
        "name": "",
        "x": 870,
        "y": 220,
        "wires": []
    },
    {
        "id": "e07b6d25.d3f88",
        "type": "function",
        "z": "ef334060.da584",
        "name": "Get Data",
        "func": "var devicelist = flow.get('devicelist');\nmsg.payload = devicelist;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 740,
        "y": 220,
        "wires": [
            [
                "9e2e3a21.508488"
            ]
        ]
    },
    {
        "id": "159e20d8.80f35f",
        "type": "comment",
        "z": "ef334060.da584",
        "name": "HTTP JSON API",
        "info": "",
        "x": 120,
        "y": 220,
        "wires": []
    },
    {
        "id": "5fc28354.efa61c",
        "type": "function",
        "z": "ef334060.da584",
        "name": "Store Globally",
        "func": "global.set('zigbee2mqttdevicelist',msg.payload.message);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 890,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "279644dc.6dee7c",
        "type": "mqtt in",
        "z": "745da55.b69b05c",
        "name": "zigbee2mqtt/bridge state",
        "topic": "zigbee2mqtt/bridge/state",
        "qos": "2",
        "datatype": "auto",
        "broker": "39f079e8.8d0cd6",
        "x": 270,
        "y": 80,
        "wires": [
            [
                "73aeae18.80fcc"
            ]
        ]
    },
    {
        "id": "73aeae18.80fcc",
        "type": "function",
        "z": "745da55.b69b05c",
        "name": "Format Data",
        "func": "flow.set('bridgestate',msg.payload);\nvar bridgestate = flow.get('bridgestate');\nmsg.payload = bridgestate;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 470,
        "y": 80,
        "wires": [
            [
                "dd378351.d3647"
            ]
        ]
    },
    {
        "id": "a34a71ef.4217d",
        "type": "ui_template",
        "z": "745da55.b69b05c",
        "group": "40573a59.6ec0c4",
        "name": "",
        "order": 0,
        "width": "6",
        "height": "2",
        "format": "<style>\n    {{msg.style}}\n</style>\n\n<table>\n  <tr>\n    <td>Bridge</td>\n    <td>{{msg.payload.bridgestate}}</td>\n  </tr>\n  <tr>\n    <td>Devices</td>\n    <td>{{msg.payload.numberofdevices}}</td>\n  </tr>\n</table>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 660,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "200af5e2.bc798a",
        "type": "function",
        "z": "745da55.b69b05c",
        "name": "Format Data",
        "func": "var bridgestate = flow.get('bridgestate');\nvar devicelist = global.get('zigbee2mqttdevicelist');\nmsg.payload = {}\nmsg.payload.bridgestate = bridgestate;\nmsg.payload.numberofdevices = devicelist.length;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 510,
        "y": 140,
        "wires": [
            [
                "a34a71ef.4217d"
            ]
        ]
    },
    {
        "id": "55e501ad.f5a31",
        "type": "inject",
        "z": "745da55.b69b05c",
        "name": "",
        "repeat": "3",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 350,
        "y": 140,
        "wires": [
            [
                "200af5e2.bc798a"
            ]
        ]
    },
    {
        "id": "dd378351.d3647",
        "type": "debug",
        "z": "745da55.b69b05c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "x": 610,
        "y": 80,
        "wires": []
    },
    {
        "id": "4cc29788.d3dfb8",
        "type": "comment",
        "z": "745da55.b69b05c",
        "name": "Get state",
        "info": "",
        "x": 80,
        "y": 80,
        "wires": []
    },
    {
        "id": "9a06de18.4cfd6",
        "type": "comment",
        "z": "745da55.b69b05c",
        "name": "Update Web UI on Interval",
        "info": "",
        "x": 130,
        "y": 140,
        "wires": []
    },
    {
        "id": "b6701cc1.b20c1",
        "type": "http in",
        "z": "745da55.b69b05c",
        "name": "",
        "url": "/adminpanelapi/state",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 270,
        "y": 220,
        "wires": [
            [
                "eaa0f59a.9ea2e8"
            ]
        ]
    },
    {
        "id": "91945b7c.338b18",
        "type": "http response",
        "z": "745da55.b69b05c",
        "name": "",
        "x": 590,
        "y": 220,
        "wires": []
    },
    {
        "id": "eaa0f59a.9ea2e8",
        "type": "function",
        "z": "745da55.b69b05c",
        "name": "Get Data",
        "func": "var bridgestate = flow.get('bridgestate');\nmsg.payload = bridgestate;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 460,
        "y": 220,
        "wires": [
            [
                "91945b7c.338b18"
            ]
        ]
    },
    {
        "id": "911973d4.caa7b",
        "type": "comment",
        "z": "745da55.b69b05c",
        "name": "HTTP API",
        "info": "",
        "x": 80,
        "y": 220,
        "wires": []
    },
    {
        "id": "e536b93d.38ce58",
        "type": "ui_dropdown",
        "z": "4b20a347.6179ec",
        "name": "",
        "label": "",
        "place": "Select option",
        "group": "4cb35853.cdcde8",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "options": [
            {
                "label": "Info",
                "value": "info",
                "type": "str"
            },
            {
                "label": "Debug",
                "value": "debug",
                "type": "str"
            },
            {
                "label": "Warn",
                "value": "warn",
                "type": "str"
            },
            {
                "label": "Error",
                "value": "error",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "",
        "x": 120,
        "y": 60,
        "wires": [
            [
                "7557b403.7b31cc"
            ]
        ]
    },
    {
        "id": "7557b403.7b31cc",
        "type": "mqtt out",
        "z": "4b20a347.6179ec",
        "name": "zigbee2mqtt/in Logging Level",
        "topic": "zigbee2mqtt/bridge/config/log_level",
        "qos": "",
        "retain": "",
        "broker": "39f079e8.8d0cd6",
        "x": 380,
        "y": 60,
        "wires": []
    },
    {
        "id": "3d54715b.2d141e",
        "type": "ui_text_input",
        "z": "321dbafd.bfadd6",
        "name": "",
        "label": "Device Name",
        "group": "bbb3596e.f2c6a8",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": "5",
        "topic": "",
        "x": 300,
        "y": 60,
        "wires": [
            [
                "7bbae970.739f08"
            ]
        ]
    },
    {
        "id": "77e98a80.5cecc4",
        "type": "mqtt out",
        "z": "321dbafd.bfadd6",
        "name": "zigbee2mqtt/in Remove",
        "topic": "zigbee2mqtt/bridge/config/remove",
        "qos": "",
        "retain": "",
        "broker": "39f079e8.8d0cd6",
        "x": 1190,
        "y": 60,
        "wires": []
    },
    {
        "id": "bba4a9e2.774a58",
        "type": "function",
        "z": "321dbafd.bfadd6",
        "name": "Format Data",
        "func": "flow.set('remove',msg.payload.remove);",
        "outputs": 1,
        "noerr": 0,
        "x": 650,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "7bbae970.739f08",
        "type": "change",
        "z": "321dbafd.bfadd6",
        "name": "change msg old",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.remove",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 60,
        "wires": [
            [
                "bba4a9e2.774a58"
            ]
        ]
    },
    {
        "id": "23f4c1c8.b1cdee",
        "type": "function",
        "z": "321dbafd.bfadd6",
        "name": "Format Data",
        "func": "var remove = flow.get('remove');\nif (typeof remove !== 'undefined' && remove !== null && remove !== \"\"){\nmsg.payload = remove;\n\nreturn msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 970,
        "y": 60,
        "wires": [
            [
                "77e98a80.5cecc4"
            ]
        ]
    },
    {
        "id": "2fb6b0f0.c1b22",
        "type": "ui_button",
        "z": "321dbafd.bfadd6",
        "name": "",
        "group": "bbb3596e.f2c6a8",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Remove",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "date",
        "topic": "",
        "x": 820,
        "y": 60,
        "wires": [
            [
                "23f4c1c8.b1cdee",
                "33ef226e.e110ce"
            ]
        ]
    },
    {
        "id": "4475f491.2a912c",
        "type": "comment",
        "z": "321dbafd.bfadd6",
        "name": "Remove Device",
        "info": "",
        "x": 120,
        "y": 60,
        "wires": []
    },
    {
        "id": "ff765b29.6adee8",
        "type": "mqtt in",
        "z": "321dbafd.bfadd6",
        "name": "zigbee2mqtt/logging",
        "topic": "zigbee2mqtt/bridge/log",
        "qos": "2",
        "datatype": "auto",
        "broker": "39f079e8.8d0cd6",
        "x": 290,
        "y": 120,
        "wires": [
            [
                "745b519f.3cebe"
            ]
        ]
    },
    {
        "id": "745b519f.3cebe",
        "type": "json",
        "z": "321dbafd.bfadd6",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 450,
        "y": 120,
        "wires": [
            [
                "7ddf8dc.b520d74"
            ]
        ]
    },
    {
        "id": "1e58e32b.ccff3d",
        "type": "ui_toast",
        "z": "321dbafd.bfadd6",
        "position": "top right",
        "displayTime": "5",
        "highlight": "",
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "topic": "System Notification",
        "name": "",
        "x": 790,
        "y": 120,
        "wires": []
    },
    {
        "id": "7ddf8dc.b520d74",
        "type": "function",
        "z": "321dbafd.bfadd6",
        "name": "Notification",
        "func": "if(msg.payload.type == 'device_removed') {\nvar remove = flow.get('remove');\nif (typeof remove !== 'undefined' && remove !== null && remove !== \"\"){\nmsg.payload = (\"Deviced removed: \" + msg.payload.message);\n\n// Reset field\n//remove = \"\";\n//flow.set('remove',msg.payload.message);\n\nreturn msg;\n}\n}\n\n",
        "outputs": 1,
        "noerr": 0,
        "x": 590,
        "y": 120,
        "wires": [
            [
                "1e58e32b.ccff3d"
            ]
        ]
    },
    {
        "id": "f7da77dc.c6e758",
        "type": "comment",
        "z": "321dbafd.bfadd6",
        "name": "Notification",
        "info": "",
        "x": 110,
        "y": 120,
        "wires": []
    },
    {
        "id": "f33f2806.7e7f48",
        "type": "ui_toast",
        "z": "321dbafd.bfadd6",
        "position": "top right",
        "displayTime": "5",
        "highlight": "",
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "topic": "System Notification",
        "name": "",
        "x": 1210,
        "y": 120,
        "wires": []
    },
    {
        "id": "33ef226e.e110ce",
        "type": "function",
        "z": "321dbafd.bfadd6",
        "name": "Notification",
        "func": "var remove = flow.get('remove');\nif (typeof remove === 'undefined' || remove === null || remove === \"\"){\nmsg.payload = \"Enter a device to remove\";\n\nreturn msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 1010,
        "y": 120,
        "wires": [
            [
                "f33f2806.7e7f48"
            ]
        ]
    },
    {
        "id": "17f72daf.369812",
        "type": "ui_dropdown",
        "z": "8bff0e3.fceb9f",
        "name": "",
        "label": "",
        "place": "Select option",
        "group": "7b37feaf.b63ae",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "options": [
            {
                "label": "Allow",
                "value": "true",
                "type": "str"
            },
            {
                "label": "Deny",
                "value": "false",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "",
        "x": 90,
        "y": 40,
        "wires": [
            [
                "32c724f.65b28dc",
                "2c5e4cc7.f1b534"
            ]
        ]
    },
    {
        "id": "32c724f.65b28dc",
        "type": "mqtt out",
        "z": "8bff0e3.fceb9f",
        "name": "zigbee2mqtt/in Join",
        "topic": "zigbee2mqtt/bridge/config/permit_join",
        "qos": "",
        "retain": "",
        "broker": "cae262ab.45512",
        "x": 270,
        "y": 40,
        "wires": []
    },
    {
        "id": "4cfd10b0.ff8d6",
        "type": "ui_toast",
        "z": "8bff0e3.fceb9f",
        "position": "top right",
        "displayTime": "5",
        "highlight": "",
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "topic": "System Notification",
        "name": "",
        "x": 450,
        "y": 100,
        "wires": []
    },
    {
        "id": "2c5e4cc7.f1b534",
        "type": "function",
        "z": "8bff0e3.fceb9f",
        "name": "Notification",
        "func": "if (typeof msg.payload !== 'undefined' && msg.payload !== null && msg.payload !== \"\"){\nif (msg.payload == \"false\"){\n    msg.payload = \"Permit join: Deny\";\n}\nif (msg.payload == \"true\"){\n    msg.payload = \"Permit join: Allow\";\n}\nreturn msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 250,
        "y": 100,
        "wires": [
            [
                "4cfd10b0.ff8d6"
            ]
        ]
    },
    {
        "id": "b8f2f698.57e568",
        "type": "ui_text_input",
        "z": "e084a6a.4631f58",
        "name": "",
        "label": "Old Name",
        "group": "241ead91.463d32",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": "5",
        "topic": "",
        "x": 120,
        "y": 140,
        "wires": [
            [
                "d7eb0922.b84f08"
            ]
        ]
    },
    {
        "id": "94d90d29.f3402",
        "type": "ui_text_input",
        "z": "e084a6a.4631f58",
        "name": "",
        "label": "New Name",
        "group": "241ead91.463d32",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": "5",
        "topic": "",
        "x": 130,
        "y": 200,
        "wires": [
            [
                "affaacf8.e5f47"
            ]
        ]
    },
    {
        "id": "42f80cde.64caa4",
        "type": "mqtt out",
        "z": "e084a6a.4631f58",
        "name": "zigbee2mqtt/in Rename",
        "topic": "zigbee2mqtt/bridge/config/rename",
        "qos": "",
        "retain": "",
        "broker": "39f079e8.8d0cd6",
        "x": 1010,
        "y": 140,
        "wires": []
    },
    {
        "id": "45b3ba5.f047644",
        "type": "function",
        "z": "e084a6a.4631f58",
        "name": "Format Data",
        "func": "flow.set('oldname',msg.payload.old);",
        "outputs": 1,
        "noerr": 0,
        "x": 470,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "d7eb0922.b84f08",
        "type": "change",
        "z": "e084a6a.4631f58",
        "name": "change msg old",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.old",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 140,
        "wires": [
            [
                "45b3ba5.f047644"
            ]
        ]
    },
    {
        "id": "affaacf8.e5f47",
        "type": "change",
        "z": "e084a6a.4631f58",
        "name": "change msg new",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "payload.new",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 200,
        "wires": [
            [
                "f95d60ee.d6ca"
            ]
        ]
    },
    {
        "id": "21cf98b4.9a32f8",
        "type": "function",
        "z": "e084a6a.4631f58",
        "name": "Format Data",
        "func": "var oldname = flow.get('oldname');\nvar newname = flow.get('newname');\n\nif (typeof oldname !== 'undefined' && oldname !== null && oldname !== \"\" && typeof newname !== 'undefined' && newname !== null && newname !== \"\"){\nmsg.payload = {\"old\": oldname, \"new\": newname}\n\n// Reset fields\noldname = \"\";\nnewname = \"\";\nflow.set('oldname',msg.payload.old);\nflow.set('newname',msg.payload.new);\n\nreturn msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 790,
        "y": 140,
        "wires": [
            [
                "42f80cde.64caa4"
            ]
        ]
    },
    {
        "id": "f95d60ee.d6ca",
        "type": "function",
        "z": "e084a6a.4631f58",
        "name": "Format Data",
        "func": "flow.set('newname',msg.payload.new);",
        "outputs": 1,
        "noerr": 0,
        "x": 490,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "f3b62056.55b2d",
        "type": "ui_button",
        "z": "e084a6a.4631f58",
        "name": "",
        "group": "241ead91.463d32",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Rename",
        "color": "",
        "bgcolor": "",
        "icon": "",
        "payload": "",
        "payloadType": "date",
        "topic": "",
        "x": 640,
        "y": 140,
        "wires": [
            [
                "21cf98b4.9a32f8",
                "413a9336.12cf2c"
            ]
        ]
    },
    {
        "id": "2826da46.731886",
        "type": "ui_toast",
        "z": "e084a6a.4631f58",
        "position": "top right",
        "displayTime": "5",
        "highlight": "",
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "topic": "System Notification",
        "name": "",
        "x": 850,
        "y": 200,
        "wires": []
    },
    {
        "id": "413a9336.12cf2c",
        "type": "function",
        "z": "e084a6a.4631f58",
        "name": "Notification",
        "func": "var oldname = flow.get('oldname');\nvar newname = flow.get('newname');\n\nif (typeof oldname !== 'undefined' && oldname !== null && oldname !== \"\" && typeof newname !== 'undefined' && newname !== null && newname !== \"\"){\nmsg.payload = (\"Rename Device: \" + oldname + \" to \" + newname);\nreturn msg;\n} else {\nmsg.payload = \"Enter device to rename\";\nreturn msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 670,
        "y": 200,
        "wires": [
            [
                "2826da46.731886"
            ]
        ]
    },
    {
        "id": "d2be8f77.7326a",
        "type": "subflow:e084a6a.4631f58",
        "z": "39aec885.0430c8",
        "name": "",
        "env": [],
        "x": 830,
        "y": 540,
        "wires": []
    },
    {
        "id": "12b79f03.54ddc1",
        "type": "subflow:8bff0e3.fceb9f",
        "z": "39aec885.0430c8",
        "name": "",
        "env": [],
        "x": 810,
        "y": 500,
        "wires": []
    },
    {
        "id": "bbc5a6f7.dde758",
        "type": "subflow:321dbafd.bfadd6",
        "z": "39aec885.0430c8",
        "name": "",
        "env": [],
        "x": 830,
        "y": 580,
        "wires": []
    },
    {
        "id": "2a059d07.c5db22",
        "type": "comment",
        "z": "39aec885.0430c8",
        "name": "Function",
        "info": "",
        "x": 810,
        "y": 460,
        "wires": []
    },
    {
        "id": "c6a120ae.fc064",
        "type": "subflow:4b20a347.6179ec",
        "z": "39aec885.0430c8",
        "name": "",
        "env": [],
        "x": 820,
        "y": 620,
        "wires": []
    },
    {
        "id": "9748fef8.41217",
        "type": "subflow:745da55.b69b05c",
        "z": "39aec885.0430c8",
        "name": "",
        "env": [],
        "x": 800,
        "y": 660,
        "wires": []
    },
    {
        "id": "b8612dd3.59558",
        "type": "subflow:ef334060.da584",
        "z": "39aec885.0430c8",
        "name": "",
        "env": [],
        "x": 800,
        "y": 700,
        "wires": []
    },
    {
        "id": "48f768d0.746138",
        "type": "comment",
        "z": "39aec885.0430c8",
        "name": "Other",
        "info": "",
        "x": 1060,
        "y": 460,
        "wires": []
    },
    {
        "id": "ea0eb635.470828",
        "type": "subflow:c2287cf1.f1006",
        "z": "39aec885.0430c8",
        "name": "",
        "env": [],
        "x": 1120,
        "y": 520,
        "wires": []
    },
    {
        "id": "1651116a.3aec8f",
        "type": "subflow:1d7f96d0.a5ef29",
        "z": "39aec885.0430c8",
        "name": "",
        "x": 1080,
        "y": 560,
        "wires": []
    },
    {
        "id": "b3619bb2.e34bb8",
        "type": "mqtt in",
        "z": "2ba505e1.0398ba",
        "name": "",
        "topic": "zigbee2mqtt/#",
        "qos": "2",
        "datatype": "utf8",
        "broker": "39f079e8.8d0cd6",
        "x": 170,
        "y": 260,
        "wires": [
            [
                "ff0f0f71.9fbdf"
            ]
        ]
    },
    {
        "id": "f4a1d19c.e4cbc",
        "type": "json",
        "z": "2ba505e1.0398ba",
        "name": "convert to objects",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 530,
        "y": 260,
        "wires": [
            [
                "372778a1.179e18"
            ]
        ]
    },
    {
        "id": "ff0f0f71.9fbdf",
        "type": "switch",
        "z": "2ba505e1.0398ba",
        "name": "Pick topic",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "regex",
                "v": "^(?!.*(bridge|network))",
                "vt": "str",
                "case": false
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 340,
        "y": 260,
        "wires": [
            [
                "f4a1d19c.e4cbc"
            ]
        ]
    },
    {
        "id": "372778a1.179e18",
        "type": "switch",
        "z": "2ba505e1.0398ba",
        "name": "",
        "property": "retain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 710,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "e8c9c53c.370008",
        "type": "zigbee2mqtt-bridge",
        "z": "e084a6a.4631f58",
        "name": "",
        "server": "fa873071.68d96",
        "topic": null,
        "x": 640,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "ead6e0fb.b9158",
        "type": "mqtt in",
        "z": "98617870.5b9f78",
        "name": "Sensor1",
        "topic": "zigbee2mqtt/Sensor1",
        "qos": "0",
        "datatype": "utf8",
        "broker": "39f079e8.8d0cd6",
        "x": 420,
        "y": 700,
        "wires": [
            [
                "1ac6f1aa.88a52e"
            ]
        ]
    },
    {
        "id": "1ac6f1aa.88a52e",
        "type": "json",
        "z": "98617870.5b9f78",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 590,
        "y": 700,
        "wires": [
            [
                "2843ebfa.647394",
                "69dd4aa8.43b494",
                "f364930e.8eb0c"
            ]
        ]
    },
    {
        "id": "c558606a.caba",
        "type": "rbe",
        "z": "98617870.5b9f78",
        "name": "Occupancy",
        "func": "rbei",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload.occupancy",
        "x": 930,
        "y": 700,
        "wires": [
            [
                "f70a0251.32eed",
                "6dee35ea.07cd7c"
            ]
        ]
    },
    {
        "id": "f70a0251.32eed",
        "type": "switch",
        "z": "98617870.5b9f78",
        "name": "Which Occupancy",
        "property": "payload.occupancy",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1130,
        "y": 700,
        "wires": [
            [
                "c52f05ef.35ce78"
            ],
            [
                "f6f7db89.ae9248"
            ]
        ]
    },
    {
        "id": "c52f05ef.35ce78",
        "type": "change",
        "z": "98617870.5b9f78",
        "name": "ON",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"state\": \"ON\"}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "zigbee2mqtt/aqara1/set",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1330,
        "y": 680,
        "wires": [
            [
                "1e0bc906.8660c7"
            ]
        ]
    },
    {
        "id": "f6f7db89.ae9248",
        "type": "change",
        "z": "98617870.5b9f78",
        "name": "OFF",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"state\": \"OFF\"}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "zigbee2mqtt/aqara1/set",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1330,
        "y": 720,
        "wires": [
            [
                "6a2e6ab4.832b94"
            ]
        ]
    },
    {
        "id": "6a2e6ab4.832b94",
        "type": "delay",
        "z": "98617870.5b9f78",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1520,
        "y": 720,
        "wires": [
            [
                "1e0bc906.8660c7"
            ]
        ]
    },
    {
        "id": "1e0bc906.8660c7",
        "type": "mqtt out",
        "z": "98617870.5b9f78",
        "name": "listen",
        "topic": "",
        "qos": "0",
        "retain": "",
        "broker": "39f079e8.8d0cd6",
        "x": 1690,
        "y": 680,
        "wires": []
    },
    {
        "id": "f364930e.8eb0c",
        "type": "switch",
        "z": "98617870.5b9f78",
        "name": "retainfalse",
        "property": "retain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 770,
        "y": 700,
        "wires": [
            [
                "c558606a.caba"
            ]
        ]
    },
    {
        "id": "b96bef8b.28b06",
        "type": "ui_led",
        "z": "98617870.5b9f78",
        "group": "9a0992c2.8c6b",
        "order": 2,
        "width": "2",
        "height": "2",
        "label": "",
        "labelPlacement": "left",
        "labelAlignment": "right",
        "colorForValue": [
            {
                "color": "red",
                "value": "true",
                "valueType": "bool"
            },
            {
                "color": "green",
                "value": "false",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "name": "Sensor",
        "x": 1160,
        "y": 760,
        "wires": []
    },
    {
        "id": "6dee35ea.07cd7c",
        "type": "debug",
        "z": "98617870.5b9f78",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1290,
        "y": 500,
        "wires": []
    },
    {
        "id": "2843ebfa.647394",
        "type": "change",
        "z": "98617870.5b9f78",
        "name": "illuminance",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.illuminance_lux",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 710,
        "y": 820,
        "wires": [
            [
                "124874b0.b8c84b"
            ]
        ]
    },
    {
        "id": "124874b0.b8c84b",
        "type": "ui_gauge",
        "z": "98617870.5b9f78",
        "name": "Lux",
        "group": "9a0992c2.8c6b",
        "order": 3,
        "width": 0,
        "height": 0,
        "gtype": "gage",
        "title": "gauge",
        "label": "Lux",
        "format": "{{value}}",
        "min": 0,
        "max": "400",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "x": 870,
        "y": 860,
        "wires": []
    },
    {
        "id": "69dd4aa8.43b494",
        "type": "change",
        "z": "98617870.5b9f78",
        "name": "Occupancy",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.occupancy",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 810,
        "y": 760,
        "wires": [
            [
                "b96bef8b.28b06"
            ]
        ]
    },
    {
        "id": "77ecc3ef.27946c",
        "type": "mqtt in",
        "z": "98617870.5b9f78",
        "name": "Sensor1",
        "topic": "zigbee2mqtt/Sensor1",
        "qos": "0",
        "datatype": "utf8",
        "broker": "39f079e8.8d0cd6",
        "x": 580,
        "y": 1040,
        "wires": [
            [
                "5ffe054c.5f43ac"
            ]
        ]
    },
    {
        "id": "5ffe054c.5f43ac",
        "type": "json",
        "z": "98617870.5b9f78",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 750,
        "y": 1040,
        "wires": [
            [
                "72770348.24791c"
            ]
        ]
    },
    {
        "id": "74511cb9.134ae4",
        "type": "rbe",
        "z": "98617870.5b9f78",
        "name": "Occupancy",
        "func": "rbei",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload.occupancy",
        "x": 1090,
        "y": 1040,
        "wires": [
            [
                "a5ed0f1c.de193"
            ]
        ]
    },
    {
        "id": "a5ed0f1c.de193",
        "type": "switch",
        "z": "98617870.5b9f78",
        "name": "Which Occupancy",
        "property": "payload.occupancy",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1290,
        "y": 1040,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "72770348.24791c",
        "type": "switch",
        "z": "98617870.5b9f78",
        "name": "retainfalse",
        "property": "retain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 910,
        "y": 1040,
        "wires": [
            [
                "74511cb9.134ae4"
            ]
        ]
    },
    {
        "id": "dc51bea7.6fa3b",
        "type": "mqtt in",
        "z": "3bd1d239.8e8a7e",
        "name": "Sensor1",
        "topic": "zigbee2mqtt/Sensor1",
        "qos": "0",
        "datatype": "auto",
        "broker": "39f079e8.8d0cd6",
        "x": 200,
        "y": 80,
        "wires": [
            [
                "a5174fd6.697dd"
            ]
        ]
    },
    {
        "id": "a5174fd6.697dd",
        "type": "json",
        "z": "3bd1d239.8e8a7e",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 370,
        "y": 80,
        "wires": [
            [
                "fe498da6.34c8f"
            ]
        ]
    },
    {
        "id": "fe498da6.34c8f",
        "type": "change",
        "z": "3bd1d239.8e8a7e",
        "name": "detect",
        "rules": [
            {
                "t": "set",
                "p": "Sensor1_motion",
                "pt": "global",
                "to": "payload.occupancy",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "688b66f8.8b6fe8",
        "type": "mqtt in",
        "z": "eb4dfade.17b168",
        "name": "Aqara1",
        "topic": "zigbee2mqtt/aqara1",
        "qos": "0",
        "datatype": "auto",
        "broker": "39f079e8.8d0cd6",
        "x": 190,
        "y": 80,
        "wires": [
            [
                "315c0cc9.c88394"
            ]
        ]
    },
    {
        "id": "315c0cc9.c88394",
        "type": "json",
        "z": "eb4dfade.17b168",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 330,
        "y": 80,
        "wires": [
            [
                "cbd2815a.f239e"
            ]
        ]
    },
    {
        "id": "dcba1475.5d1898",
        "type": "mqtt out",
        "z": "eb4dfade.17b168",
        "name": "aqara1 out",
        "topic": "",
        "qos": "",
        "retain": "",
        "broker": "39f079e8.8d0cd6",
        "x": 550,
        "y": 160,
        "wires": []
    },
    {
        "id": "14fb80dd.6fec7f",
        "type": "change",
        "z": "eb4dfade.17b168",
        "name": "aqara1-inject",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"state\": \"\"}",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "zigbee2mqtt/aqara1/get",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 210,
        "y": 160,
        "wires": [
            [
                "dcba1475.5d1898"
            ]
        ]
    },
    {
        "id": "cbd2815a.f239e",
        "type": "change",
        "z": "eb4dfade.17b168",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "aqara1",
                "pt": "global",
                "to": "payload.state",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "101b5a8d.2d18d5",
        "type": "debug",
        "z": "92419cdc.39ec9",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 220,
        "wires": []
    },
    {
        "id": "ca3a623.bb6c4a",
        "type": "inject",
        "z": "92419cdc.39ec9",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 540,
        "y": 220,
        "wires": [
            [
                "7c01493d.7a5418"
            ]
        ]
    },
    {
        "id": "1665981f.3ad7e8",
        "type": "change",
        "z": "20bf2b67.6ceef4",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "aqara1",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "4bfe0425.66bbec",
        "type": "inject",
        "z": "92419cdc.39ec9",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 540,
        "y": 300,
        "wires": [
            [
                "39a915de.65618a"
            ]
        ]
    },
    {
        "id": "4caf2b5c.e44024",
        "type": "debug",
        "z": "92419cdc.39ec9",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 950,
        "y": 300,
        "wires": []
    },
    {
        "id": "83b549b.98556b8",
        "type": "change",
        "z": "3bd1d239.8e8a7e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Sensor1_motion",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 220,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "335083e3.2b03fc",
        "type": "change",
        "z": "92419cdc.39ec9",
        "name": "Toggle",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"state\":\"toggle\",\"transition\": 2}",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1530,
        "y": 1300,
        "wires": [
            [
                "59562ad1.1d83c4"
            ]
        ]
    },
    {
        "id": "5221f3b6.d41a7c",
        "type": "inject",
        "z": "92419cdc.39ec9",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1320,
        "y": 1300,
        "wires": [
            [
                "8edc5cdb.f3f93"
            ]
        ]
    },
    {
        "id": "57cee0d4.34c4b",
        "type": "mqtt in",
        "z": "20bf2b67.6ceef4",
        "name": "Aqara1",
        "topic": "zigbee2mqtt/aqara1",
        "qos": "0",
        "datatype": "auto",
        "broker": "39f079e8.8d0cd6",
        "x": 390,
        "y": 80,
        "wires": [
            [
                "2281f76d.c5cc78"
            ]
        ]
    },
    {
        "id": "2281f76d.c5cc78",
        "type": "json",
        "z": "20bf2b67.6ceef4",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 530,
        "y": 80,
        "wires": [
            [
                "5c5318e0.6bf0f8"
            ]
        ]
    },
    {
        "id": "f8b8f91b.f6ef18",
        "type": "mqtt out",
        "z": "20bf2b67.6ceef4",
        "name": "aqara1 out",
        "topic": "",
        "qos": "",
        "retain": "",
        "broker": "39f079e8.8d0cd6",
        "x": 670,
        "y": 140,
        "wires": []
    },
    {
        "id": "cb0fda22.a26308",
        "type": "change",
        "z": "20bf2b67.6ceef4",
        "name": "aqara1-inject",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"state\": \"\"}",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "zigbee2mqtt/aqara1/get",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 140,
        "wires": [
            [
                "f8b8f91b.f6ef18"
            ]
        ]
    },
    {
        "id": "5c5318e0.6bf0f8",
        "type": "change",
        "z": "20bf2b67.6ceef4",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "aqara1",
                "pt": "global",
                "to": "payload.state",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 730,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "66d40a61.2d83b4",
        "type": "change",
        "z": "20bf2b67.6ceef4",
        "name": "",
        "rules": [],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 200,
        "y": 160,
        "wires": [
            [
                "cb0fda22.a26308",
                "1665981f.3ad7e8"
            ]
        ]
    },
    {
        "id": "7c01493d.7a5418",
        "type": "subflow:20bf2b67.6ceef4",
        "z": "92419cdc.39ec9",
        "name": "Inquire Aqara1",
        "env": [],
        "x": 760,
        "y": 220,
        "wires": [
            [
                "101b5a8d.2d18d5"
            ]
        ]
    },
    {
        "id": "39a915de.65618a",
        "type": "subflow:3bd1d239.8e8a7e",
        "z": "92419cdc.39ec9",
        "name": "Inquire Sensor1",
        "env": [],
        "x": 740,
        "y": 300,
        "wires": [
            [
                "4caf2b5c.e44024"
            ]
        ]
    },
    {
        "id": "e7ba94b5.8d3b88",
        "type": "change",
        "z": "92419cdc.39ec9",
        "name": "On",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"state\": \"on\"}",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1610,
        "y": 1480,
        "wires": [
            [
                "59562ad1.1d83c4"
            ]
        ]
    },
    {
        "id": "29f962ac.de429e",
        "type": "change",
        "z": "92419cdc.39ec9",
        "name": "Off",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"state\": \"off\"}",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1550,
        "y": 1380,
        "wires": [
            [
                "59562ad1.1d83c4"
            ]
        ]
    },
    {
        "id": "777c8677.f4ccd8",
        "type": "inject",
        "z": "92419cdc.39ec9",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1270,
        "y": 1380,
        "wires": [
            [
                "29f962ac.de429e"
            ]
        ]
    },
    {
        "id": "e44cf7d7.226068",
        "type": "inject",
        "z": "92419cdc.39ec9",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1290,
        "y": 1500,
        "wires": [
            [
                "e7ba94b5.8d3b88"
            ]
        ]
    },
    {
        "id": "8edc5cdb.f3f93",
        "type": "change",
        "z": "92419cdc.39ec9",
        "name": "Toggle",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"state\":\"toggle\",\"transition\": 2}",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1270,
        "y": 880,
        "wires": [
            [
                "59562ad1.1d83c4",
                "bad126ec.6196a8"
            ]
        ]
    },
    {
        "id": "4269af8c.611e6",
        "type": "switch",
        "z": "92419cdc.39ec9",
        "name": "dswitch1",
        "property": "payload.action",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "single_right",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "double_right",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1100,
        "y": 880,
        "wires": [
            [
                "8edc5cdb.f3f93"
            ],
            [
                "e051bc12.e08f2"
            ]
        ]
    },
    {
        "id": "94f008b0.f64b48",
        "type": "mqtt in",
        "z": "92419cdc.39ec9",
        "name": "Switch1",
        "topic": "zigbee2mqtt/switch1",
        "qos": "0",
        "datatype": "utf8",
        "broker": "39f079e8.8d0cd6",
        "x": 410,
        "y": 880,
        "wires": [
            [
                "fa2fc059.71e85"
            ]
        ]
    },
    {
        "id": "fa2fc059.71e85",
        "type": "json",
        "z": "92419cdc.39ec9",
        "name": "JSON->Object",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 600,
        "y": 900,
        "wires": [
            [
                "75d37836.a33b98"
            ]
        ]
    },
    {
        "id": "75d37836.a33b98",
        "type": "switch",
        "z": "92419cdc.39ec9",
        "name": "retainfalse",
        "property": "retain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 870,
        "y": 880,
        "wires": [
            [
                "4269af8c.611e6",
                "9d2ac22.aaeef4"
            ]
        ]
    },
    {
        "id": "59562ad1.1d83c4",
        "type": "mqtt out",
        "z": "92419cdc.39ec9",
        "name": "aqara1 out",
        "topic": "zigbee2mqtt/aqara1/set",
        "qos": "",
        "retain": "",
        "broker": "39f079e8.8d0cd6",
        "x": 1750,
        "y": 1060,
        "wires": []
    },
    {
        "id": "9d2ac22.aaeef4",
        "type": "debug",
        "z": "92419cdc.39ec9",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1070,
        "y": 980,
        "wires": []
    },
    {
        "id": "bb08ee96.a54d8",
        "type": "mqtt in",
        "z": "92419cdc.39ec9",
        "name": "Sensor1",
        "topic": "zigbee2mqtt/Sensor1",
        "qos": "0",
        "datatype": "auto",
        "broker": "39f079e8.8d0cd6",
        "x": 420,
        "y": 520,
        "wires": [
            [
                "76c1d56d.06c8ac"
            ]
        ]
    },
    {
        "id": "76c1d56d.06c8ac",
        "type": "json",
        "z": "92419cdc.39ec9",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 590,
        "y": 520,
        "wires": [
            [
                "623d343f.41f96c"
            ]
        ]
    },
    {
        "id": "623d343f.41f96c",
        "type": "rbe",
        "z": "92419cdc.39ec9",
        "name": "occupancy",
        "func": "rbei",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload.occupancy",
        "x": 770,
        "y": 520,
        "wires": [
            [
                "88d2fbe.2c2e208"
            ]
        ]
    },
    {
        "id": "88d2fbe.2c2e208",
        "type": "switch",
        "z": "92419cdc.39ec9",
        "name": "",
        "property": "payload.occupancy",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 520,
        "wires": [
            [
                "3e522c50.e45904"
            ],
            [
                "f112d1f9.fc73f"
            ]
        ]
    },
    {
        "id": "3e522c50.e45904",
        "type": "change",
        "z": "92419cdc.39ec9",
        "name": "On",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"state\": \"on\"}",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1130,
        "y": 500,
        "wires": [
            [
                "59562ad1.1d83c4"
            ]
        ]
    },
    {
        "id": "1b5eba9.9ce6045",
        "type": "delay",
        "z": "a0f734de.d67b08",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 200,
        "y": 80,
        "wires": [
            [
                "de0a9aab.1de528"
            ]
        ]
    },
    {
        "id": "de0a9aab.1de528",
        "type": "subflow:3bd1d239.8e8a7e",
        "z": "a0f734de.d67b08",
        "name": "Inquire Sensor1",
        "env": [],
        "x": 220,
        "y": 140,
        "wires": [
            [
                "94aa1dfc.b8e79"
            ]
        ]
    },
    {
        "id": "94aa1dfc.b8e79",
        "type": "switch",
        "z": "a0f734de.d67b08",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 190,
        "y": 200,
        "wires": [
            [
                "1b5eba9.9ce6045"
            ],
            [
                "cd6d93a5.d2353"
            ]
        ]
    },
    {
        "id": "cd6d93a5.d2353",
        "type": "change",
        "z": "a0f734de.d67b08",
        "name": "Off",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"state\": \"off\"}",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 210,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "c0013b98.8e74c8",
        "type": "delay",
        "z": "92419cdc.39ec9",
        "name": "",
        "pauseType": "delayv",
        "timeout": "2",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 340,
        "y": 1140,
        "wires": [
            [
                "67148ed8.08615"
            ]
        ]
    },
    {
        "id": "67148ed8.08615",
        "type": "subflow:3bd1d239.8e8a7e",
        "z": "92419cdc.39ec9",
        "name": "Inquire Sensor1",
        "env": [],
        "x": 340,
        "y": 1200,
        "wires": [
            [
                "5fe481f2.82e9d"
            ]
        ]
    },
    {
        "id": "5fe481f2.82e9d",
        "type": "switch",
        "z": "92419cdc.39ec9",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 330,
        "y": 1260,
        "wires": [
            [
                "c0013b98.8e74c8"
            ],
            [
                "64c859d4.61b7e8"
            ]
        ]
    },
    {
        "id": "64c859d4.61b7e8",
        "type": "change",
        "z": "92419cdc.39ec9",
        "name": "Off",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"state\": \"off\"}",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 1320,
        "wires": [
            []
        ]
    },
    {
        "id": "f112d1f9.fc73f",
        "type": "subflow:a0f734de.d67b08",
        "z": "92419cdc.39ec9",
        "name": "Delay and check sensor1",
        "env": [],
        "x": 1170,
        "y": 640,
        "wires": [
            [
                "59562ad1.1d83c4"
            ]
        ]
    },
    {
        "id": "bad126ec.6196a8",
        "type": "subflow:a0f734de.d67b08",
        "z": "92419cdc.39ec9",
        "name": "Delay and check sensor1",
        "env": [],
        "x": 1430,
        "y": 1080,
        "wires": [
            [
                "59562ad1.1d83c4"
            ]
        ]
    },
    {
        "id": "acb23e5f.e8f1",
        "type": "inject",
        "z": "dd91d5bc.c35b28",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 210,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "10964e60.0a8782",
        "type": "debug",
        "z": "dd91d5bc.c35b28",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 600,
        "y": 1180,
        "wires": []
    },
    {
        "id": "7927c8a5.9313c8",
        "type": "delay",
        "z": "481e1d7a.648f04",
        "name": "",
        "pauseType": "delayv",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1000,
        "y": 600,
        "wires": [
            [
                "b63d400f.006a"
            ]
        ]
    },
    {
        "id": "b63d400f.006a",
        "type": "debug",
        "z": "481e1d7a.648f04",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1000,
        "y": 440,
        "wires": []
    },
    {
        "id": "76b5bb69.a19c14",
        "type": "inject",
        "z": "481e1d7a.648f04",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "Babba",
        "payloadType": "str",
        "x": 360,
        "y": 760,
        "wires": [
            [
                "bfa43d36.4752e"
            ]
        ]
    },
    {
        "id": "bfa43d36.4752e",
        "type": "ui_numeric",
        "z": "481e1d7a.648f04",
        "name": "",
        "label": "numeric",
        "tooltip": "",
        "group": "9a0992c2.8c6b",
        "order": 3,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": true,
        "topic": "",
        "format": "{{value}}",
        "min": 0,
        "max": "30000",
        "step": "1000",
        "x": 620,
        "y": 720,
        "wires": [
            [
                "9dea3e04.11249"
            ]
        ]
    },
    {
        "id": "edbc9ee7.cd979",
        "type": "debug",
        "z": "481e1d7a.648f04",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 720,
        "y": 340,
        "wires": []
    },
    {
        "id": "9dea3e04.11249",
        "type": "change",
        "z": "481e1d7a.648f04",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "delay",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "a5e69c0b.21ad1",
        "type": "deconz-output",
        "z": "92419cdc.39ec9",
        "name": "",
        "server": "bf0682f0.fbf51",
        "device": "group_7",
        "device_name": "○ Bureau0",
        "command": "toggle",
        "commandType": "deconz_cmd",
        "payload": "payload",
        "payloadType": "msg",
        "transitionTime": "",
        "x": 870,
        "y": 1700,
        "wires": []
    },
    {
        "id": "2016db67.70bbf4",
        "type": "mqtt in",
        "z": "92419cdc.39ec9",
        "name": "Switch1",
        "topic": "zigbee2mqtt/switch1",
        "qos": "0",
        "datatype": "utf8",
        "broker": "39f079e8.8d0cd6",
        "x": 570,
        "y": 1380,
        "wires": [
            [
                "1f8a7564.0f485b"
            ]
        ]
    },
    {
        "id": "1f8a7564.0f485b",
        "type": "json",
        "z": "92419cdc.39ec9",
        "name": "JSON->Object",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 740,
        "y": 1360,
        "wires": [
            [
                "78fb4ea.2863cb"
            ]
        ]
    },
    {
        "id": "78fb4ea.2863cb",
        "type": "switch",
        "z": "92419cdc.39ec9",
        "name": "retainfalse",
        "property": "retain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 672.01416015625,
        "y": 1492.0965576171875,
        "wires": [
            [
                "43c08c75.aeb8a4"
            ]
        ]
    },
    {
        "id": "43c08c75.aeb8a4",
        "type": "switch",
        "z": "92419cdc.39ec9",
        "name": "dswitch1",
        "property": "payload.action",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "single_left",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "double_left",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 892.01416015625,
        "y": 1492.0965576171875,
        "wires": [
            [
                "d3176375.6b1a"
            ],
            [
                "d3176375.6b1a"
            ]
        ]
    },
    {
        "id": "d3176375.6b1a",
        "type": "change",
        "z": "92419cdc.39ec9",
        "name": "Toggle",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "toggle",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 870,
        "y": 1600,
        "wires": [
            [
                "a5e69c0b.21ad1"
            ]
        ]
    },
    {
        "id": "765641b8.334f5",
        "type": "inject",
        "z": "92419cdc.39ec9",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 580,
        "y": 1580,
        "wires": [
            [
                "d3176375.6b1a"
            ]
        ]
    },
    {
        "id": "e051bc12.e08f2",
        "type": "change",
        "z": "92419cdc.39ec9",
        "name": "Toggle",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"state\":\"toggle\",\"transition\": 2}",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1390,
        "y": 980,
        "wires": [
            [
                "59562ad1.1d83c4"
            ]
        ]
    },
    {
        "id": "420fe7ab.d493c8",
        "type": "debug",
        "z": "dd91d5bc.c35b28",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 510,
        "y": 980,
        "wires": []
    },
    {
        "id": "d89104e.5a180f8",
        "type": "inject",
        "z": "dd91d5bc.c35b28",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 420,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "2e299c40.f8cea4",
        "type": "inject",
        "z": "dd91d5bc.c35b28",
        "name": "Turn on 479",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"command\": \"getdeviceinfo\", \"idx\": 479 }",
        "payloadType": "json",
        "x": 490,
        "y": 320,
        "wires": [
            [
                "f167b09f.8d036"
            ]
        ]
    },
    {
        "id": "6756898c.9f5d88",
        "type": "inject",
        "z": "dd91d5bc.c35b28",
        "name": "Turn on 482",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"command\": \"getdeviceinfo\", \"idx\": 482 }",
        "payloadType": "json",
        "x": 710,
        "y": 240,
        "wires": [
            [
                "f167b09f.8d036"
            ]
        ]
    },
    {
        "id": "3dffec1e.66e084",
        "type": "debug",
        "z": "dd91d5bc.c35b28",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 960,
        "y": 860,
        "wires": []
    },
    {
        "id": "801bd6a3.675738",
        "type": "inject",
        "z": "dd91d5bc.c35b28",
        "name": "Turn on 482",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"command\": \"getdeviceinfo\", \"idx\": 482 }",
        "payloadType": "json",
        "x": 650,
        "y": 660,
        "wires": [
            [
                "59209739.8dab68"
            ]
        ]
    },
    {
        "id": "86c0b31a.936bc",
        "type": "nora-outlet",
        "z": "dd91d5bc.c35b28",
        "devicename": "Grinder",
        "roomhint": "Kitchen",
        "name": "",
        "passthru": false,
        "nora": "cda469d1.0f29c8",
        "topic": "",
        "onvalue": "0",
        "onvalueType": "num",
        "offvalue": "1",
        "offvalueType": "num",
        "x": 840,
        "y": 1540,
        "wires": [
            [
                "a2050d59.bf0cc"
            ]
        ]
    },
    {
        "id": "a2050d59.bf0cc",
        "type": "debug",
        "z": "dd91d5bc.c35b28",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1390,
        "y": 1340,
        "wires": []
    },
    {
        "id": "45c1bfa0.be3ee",
        "type": "inject",
        "z": "dd91d5bc.c35b28",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 500,
        "y": 1460,
        "wires": [
            [
                "86c0b31a.936bc"
            ]
        ]
    },
    {
        "id": "6f484858.277e78",
        "type": "inject",
        "z": "dd91d5bc.c35b28",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 550,
        "y": 1320,
        "wires": [
            [
                "86c0b31a.936bc"
            ]
        ]
    },
    {
        "id": "14b9037c.f3e74d",
        "type": "mqtt out",
        "z": "6b268e7b.d7d06",
        "name": "",
        "topic": "domoticz/in",
        "qos": "2",
        "retain": "",
        "broker": "39f079e8.8d0cd6",
        "x": 650,
        "y": 500,
        "wires": []
    },
    {
        "id": "829f63f5.33013",
        "type": "change",
        "z": "6b268e7b.d7d06",
        "name": "Turn off espresso",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"command\":\"switchlight\",\"idx\":482,\"switchcmd\":\"Off\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 370,
        "y": 460,
        "wires": [
            [
                "14b9037c.f3e74d"
            ]
        ]
    },
    {
        "id": "268aa962.327b06",
        "type": "change",
        "z": "6b268e7b.d7d06",
        "name": "Turn off grinder",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"command\":\"switchlight\",\"idx\":483,\"switchcmd\":\"Off\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 520,
        "wires": [
            [
                "14b9037c.f3e74d"
            ]
        ]
    },
    {
        "id": "1d127f77.a4c1c1",
        "type": "subflow:6b268e7b.d7d06",
        "z": "15ebe48.940281c",
        "name": "Coffee",
        "env": [],
        "x": 730,
        "y": 600,
        "wires": []
    },
    {
        "id": "c4b24d3c.361d2",
        "type": "switch",
        "z": "6b268e7b.d7d06",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 170,
        "y": 400,
        "wires": [
            [
                "2fbd3c08.8290d4",
                "45e7b682.d958d8"
            ],
            [
                "829f63f5.33013",
                "268aa962.327b06"
            ]
        ]
    },
    {
        "id": "2fbd3c08.8290d4",
        "type": "change",
        "z": "6b268e7b.d7d06",
        "name": "Turn on espresso",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"command\":\"switchlight\",\"idx\":482,\"switchcmd\":\"On\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 370,
        "y": 300,
        "wires": [
            [
                "4ff4e04c.0ccb"
            ]
        ]
    },
    {
        "id": "45e7b682.d958d8",
        "type": "change",
        "z": "6b268e7b.d7d06",
        "name": "Turn on grinder",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"command\":\"switchlight\",\"idx\":483,\"switchcmd\":\"On\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 340,
        "wires": [
            [
                "4ff4e04c.0ccb"
            ]
        ]
    },
    {
        "id": "4ff4e04c.0ccb",
        "type": "mqtt out",
        "z": "6b268e7b.d7d06",
        "name": "",
        "topic": "domoticz/in",
        "qos": "2",
        "retain": "",
        "broker": "39f079e8.8d0cd6",
        "x": 610,
        "y": 300,
        "wires": []
    },
    {
        "id": "208f8f2b.90391",
        "type": "zigbee2mqtt-bridge",
        "z": "92419cdc.39ec9",
        "name": "",
        "server": "67c87fc0.150f8",
        "topic": null,
        "x": 330,
        "y": 720,
        "wires": [
            []
        ]
    }
]